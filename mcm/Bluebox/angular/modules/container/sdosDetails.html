<div class="md-whiteframe-4dp bb-container">
    <md-toolbar class="md-hue-2">
        <div class="md-toolbar-tools">
            <h2>
        <span>
                        <md-icon md-font-set="material-icons">
                        enhanced_encryption
                    </md-icon>&nbsp;
         SDOS encrypted container
        </span>
            </h2>
        </div>
    </md-toolbar>
    <md-content class="bb-container">

        <div layout="column">
            <div>
                <p>Utilization: <b>{{ sdos_cascade_stats.utilization }}</b>
                    <br>
                    <br>Keys used: <b>{{ sdos_cascade_stats.numObjects | numberFormat }}</b>
                    <br>Keys free: <b>{{ sdos_cascade_stats.freeSlots | numberFormat }}</b>
                    <br>Keys total: <b>{{ sdos_cascade_stats.numSlots| numberFormat }}</b>
                    <br>
                    <br>Num partitions max: <b>{{ sdos_cascade_stats.numPartitions| numberFormat }}</b>
                    <br>Keys in one partition: <b>{{ sdos_cascade_stats.partitionSize }}</b>
                    <br>
                    <br>Tree height: <b>{{ sdos_cascade_stats.levels }}</b></p>
                <p>
                    <md-button aria-label="Show Key Cascade" class="md-raised" ng-click="showCascadeSheet($event)">
                        <md-icon md-font-set="material-icons">
                            filter_b_and_w
                        </md-icon>
                        Show Key Cascade structure
                    </md-button>

                    <md-button aria-label="Show key slot allocation" class="md-raised"
                               ng-click="showMappingSheet($event)">
                        <md-icon md-font-set="material-icons">
                            gradient
                        </md-icon>
                        Show key slot allocation
                    </md-button>
                </p>
            </div>
            <md-divider></md-divider>

            <div>
                <p>Master key available: <b
                        ng-style="sdos_cascade_stats.masterKeySource.is_unlocked && {'color': 'green'} || {'color': 'red'}">{{ sdos_cascade_stats.masterKeySource.is_unlocked }}</b>
                </p>
                <p ng-hide="sdos_cascade_stats.masterKeySource.is_unlocked">
                    <md-button class="md-raised md-primary" ng-click="unlockMasterKey()">Unlock master key</md-button>
                </p>
                <p ng-hide="!sdos_cascade_stats.masterKeySource.is_unlocked">
                    <md-button class="md-raised md-warn" ng-click="lockMasterKey()">Lock master key</md-button>
                </p>
                <p>Master key ID: <b
                        ng-style="{ 'mix-blend-mode': 'difference',  'color': 'black', 'background': sdos_cascade_stats.masterKeySource.keyIdColor }">{{ sdos_cascade_stats.masterKeySource.key_id }}</b>
                </p>
                <p>Master key secured by: <b>{{ sdos_cascade_stats.masterKeySource.type }}</b></p>
                <p>Next deletable key available: <b
                        ng-style="sdos_cascade_stats.masterKeySource.is_next_deletable_ready && {'color': 'green'} || {'color': 'red'}">{{ sdos_cascade_stats.masterKeySource.is_next_deletable_ready }}</b>

                    <md-icon ng-click="clearNextDeletable()"
                             ng-hide="!sdos_cascade_stats.masterKeySource.is_next_deletable_ready" md-font-set="material-icons">
                        clear
                    </md-icon>
                    &nbsp;


                </p>
                <p ng-hide="sdos_cascade_stats.masterKeySource.is_next_deletable_ready">
                    <md-button class="md-raised md-primary" ng-click="provideNextDeletable()">Provide next deletable
                        key
                    </md-button>
                </p>
            </div>

            <md-divider></md-divider>

            <div>
                <p>Batch delete in use:
                    <b ng-style="sdos_cascade_stats.batchDelete && {'color': 'green'} || {'color': 'grey'}">{{ sdos_cascade_stats.batchDelete }}</b>
                </p>


                <p ng-hide="!sdos_cascade_stats.batchDelete">Log has a length
                    of: {{ sdos_cascade_stats.batchDeleteLogLength }}</p>
                <p ng-hide="!sdos_cascade_stats.batchDeleteLogLength">
                    <md-button class="md-raised md-warn" ng-click="batch_delete_start()">Execute batch delete log
                    </md-button>
                </p>
            </div>


        </div>
    </md-content>
</div>
